{% extends 'base/base.html' %}

{% block title %}공지사항 목록{% endblock %}

{% block extra_head %}
<style>
  body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: #f8f9fa;
  }

  .notice-page.container {
    max-width: 820px;
    margin-top: 60px;
  }

  .notice-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 30px;
    color: #6A5ACD;
  }

  .small-label {
    font-size: 0.85rem;
    color: #6c757d;
  }

  .notice-item {
    background: #fff;
    border-radius: 12px;
    padding: 18px 20px;
    margin-bottom: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    border-left: 4px solid transparent;
    transition: transform .05s ease, box-shadow .2s ease, border-color .2s ease;
  }
  .notice-item:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    border-left-color: #6A5ACD;
  }

  .notice-link {
    display: block;
    font-weight: 600;
    color: #333;
    text-decoration: none;
    line-height: 1.4;
  }
  .notice-link:hover {
    color: #6A5ACD;
    text-decoration: none;
  }

  .notice-meta {
    margin-top: 6px;
    font-size: 0.9rem;
    color: #6c757d;
  }

  .notice-empty {
    background: #fff;
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    color: #6c757d;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  }

  .pagination .page-link {
    border-radius: 10px;
  }

  .notice-page .btn-primary {
    background-color: #6A5ACD;
    border-color: #6A5ACD;
  }
  .notice-page .btn-primary:hover {
    background-color: #5c4bc4;
    border-color: #5c4bc4;
  }
</style>
{% endblock %}

{% block content %}
<div class="container notice-page">
  <h2 class="notice-title text-center">공지사항</h2>

  {% if notices %}
    {% for notice in notices %}
      <article class="notice-item">
        <a class="notice-link" href="{% url 'meetagain:notice_detail' notice.id %}">
          {{ notice.title }}
        </a>
        <div class="notice-meta">
          {{ notice.created_at|date:"Y-m-d" }}
        </div>
      </article>
    {% endfor %}
  {% else %}
    <div class="notice-empty">등록된 공지사항이 없습니다.</div>
  {% endif %}

  {% if user.is_staff %}
    <div class="text-end mt-3">
      <a href="{% url 'meetagain:notice_create' %}" class="btn btn-primary rounded-pill px-4">공지 작성</a>
    </div>
  {% endif %}

  {% if is_paginated %}
    <nav class="mt-3" aria-label="공지사항 페이지">
      <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">이전</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">이전</span></li>
        {% endif %}

        <li class="page-item disabled">
          <span class="page-link">{{ page_obj.number }} / {{ paginator.num_pages }}</span>
        </li>

        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">다음</a></li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">다음</span></li>
        {% endif %}
      </ul>
    </nav>
  {% endif %}
</div>
{% endblock %}
