{% extends 'base/base.html' %}
{% load static %}

{% block title %}내 문의내역 - MeetAgain{% endblock %}

{% block extra_head %}
<style>
  body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: #f8f9fa;
  }

  :root{
    --brand: #6A5ACD;
    --brand-ink: #5445a4;
  }

  .page-wrap{
    max-width: 880px;
    margin: 60px auto 80px;
  }

  /* 제목/서브타이틀을 help_faq와 동일하게 통일 */
  .section-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 30px;
    color: var(--brand);
    text-align: center;
  }

  .small-label {
    font-size: 1.2rem;
    font-weight: 600;
    color: #6c757d;
  }

  .inquiry-card{
    background:#fff;
    border:1px solid var(--border);
    border-radius:14px;
    padding:18px 18px 14px;
    transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
  }
  .inquiry-card:hover{
    transform: translateY(-2px);
    box-shadow: 0 10px 28px rgba(0,0,0,.08);
    border-color:#dadfea;
  }

  .inquiry-title{
    font-weight:700;
    font-size:1.05rem;
    margin:0 0 .35rem;
    line-height:1.35;
  }
  .inquiry-title a{
    color:#1f2937;
    text-decoration:none;
  }
  .inquiry-card:hover .inquiry-title a{
    color: var(--brand);
    text-decoration: underline;
    text-underline-offset: 3px;
  }

  .inquiry-meta{
    display:flex;
    align-items:center;
    gap:.5rem;
    color:#6b7280;
    font-size:.92rem;
  }
  .dot{
    width:6px; height:6px;
    border-radius:50%;
    display:inline-block;
    background:#9aa3b2;
  }

  /* 상태 색상 */
  .status-complete{
    color: #28a745; /* 초록색 */
    font-weight: 600;
  }
  .status-pending{
    color: #ffc107; /* 노란색 */
    font-weight: 600;
  }

  .response-preview{
    background:#f8fafc;
    border:1px solid #e5eaf1;
    border-radius:10px;
    padding:10px 12px;
    margin-top:10px;
    font-size:.95rem;
    color:#374151;
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }

  .action-row{
    display:flex;
    justify-content:flex-end;
    margin-top:10px;
  }
  .btn-outline-brand{
    border:1px solid #d8d2ff;
    color: var(--brand);
    background:#fff;
    padding:.34rem .7rem;
    border-radius:10px;
    font-weight:600;
    font-size:.85rem;
  }
  .btn-outline-brand:hover{
    background:#f3f2ff;
    color:#4b3da8;
    border-color:#c9c2ff;
  }

  .empty{
    text-align:center;
    padding:56px 20px;
    border:1px dashed #d7dbe6;
    border-radius:16px;
    background:#fbfcff;
  }
  .empty i{ font-size:34px; color: var(--brand); }
  .empty h5{ margin-top:10px; font-weight:800; color:#1f2937; }
  .empty p{ color:#6b7280; margin:6px 0 0; }

  .stack-16 > * + * { margin-top: 16px; }
</style>
{% endblock %}

{% block content %}
<div class="page-wrap">
  <h2 class="section-title">
    고객센터
    <span class="small-label d-block">- 나의 문의내역 -</span>
  </h2>

  {% if inquiries %}
  <div class="stack-16">
    {% for inquiry in inquiries %}
    <div class="inquiry-card">
      <h3 class="inquiry-title">
        {% if inquiry.pk %}
          <a href="{% url 'meetagain:inquiry_detail' inquiry.pk %}">{{ inquiry.subject }}</a>
        {% else %}
          {{ inquiry.subject }}
        {% endif %}
      </h3>

      <div class="inquiry-meta">
        <span class="dot"></span>
        <span>{{ inquiry.created_at|date:"Y-m-d" }}</span>
        ·
        {% if inquiry.response %}
          <span class="status-complete">답변 완료</span>
        {% else %}
          <span class="status-pending">답변 대기 중</span>
        {% endif %}
      </div>

      {% if inquiry.response %}
        <div class="response-preview">{{ inquiry.response|truncatechars:120 }}</div>
      {% endif %}

      <div class="action-row">
        {% if inquiry.pk %}
          <a href="{% url 'meetagain:inquiry_detail' inquiry.pk %}" class="btn btn-sm btn-outline-brand">상세보기</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>

  {% else %}
  <div class="empty">
    <i class="fa-regular fa-circle-question"></i>
    <h5>문의 내역이 아직 없어요</h5>
    <p>궁금한 점이 생기면 언제든 문의를 남겨주세요.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
