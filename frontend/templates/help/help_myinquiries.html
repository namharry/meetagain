{% extends 'base/base.html' %}
{% load static %}

{% block title %}내 문의내역 - MeetAgain{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin-top: 60px;">
  <h2 class="text-center mb-4" style="color: #7b3ff2; font-weight: 700;">내 문의내역</h2>

  {% if inquiries %}
    {% for inquiry in inquiries %}
    <div class="p-3 mb-3 bg-white rounded shadow-sm">
      <div class="fw-bold mb-1">
        {% if inquiry.pk %}
          <a href="{% url 'meetagain:inquiry_detail' inquiry.pk %}" class="text-decoration-none">
            {{ inquiry.subject }}
          </a>
        {% else %}
          <span>{{ inquiry.subject }}</span>
        {% endif %}
      </div>

      <div class="text-muted small">
        {{ inquiry.created_at|date:"Y-m-d" }} ·
        {% if inquiry.response %}
          <span class="text-success">답변 완료</span>
        {% else %}
          <span class="text-warning">답변 대기 중</span>
        {% endif %}
      </div>

      {% if inquiry.response %}
      <div class="bg-light p-2 mt-2 rounded" style="font-size: 0.95rem;">
        {{ inquiry.response|truncatechars:120 }}
      </div>
      {% endif %}

      <div class="mt-2 text-end">
        {% if inquiry.pk %}
          <a href="{% url 'meetagain:inquiry_detail' inquiry.pk %}" class="btn btn-sm btn-outline-primary">상세보기</a>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  {% else %}
    <p class="text-center text-muted">문의하신 내역이 없습니다.</p>
  {% endif %}
</div>
{% endblock %}
