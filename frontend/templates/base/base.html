 {% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}MeetAgain{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap, FontAwesome, Custom CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="{% static 'css/style.css' %}" rel="stylesheet">

  <!-- Kakao Map -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f387153e7e5f423d38f1a6d392d6bef8&libraries=services"></script>

  {% block extra_head %}{% endblock %}
  {% block extra_css %}{% endblock %}
</head>
<body>

<div class="container-fluid mt-4 position-relative">

  <!-- âœ… ë¡œê·¸ì¸/íšŒì›ê°€ìž…/ë¹„ë²ˆìž¬ì„¤ì • íŽ˜ì´ì§€ì—ì„œëŠ” ìƒë‹¨ ì•„ì´ì½˜ ìˆ¨ê¸°ê¸° -->
  {% if request.path != '/users/login/' and request.path != '/users/signup/' and request.path != '/users/password_reset/' %}
  <div class="top-icons d-flex justify-content-end gap-3" style="position: fixed; top: 20px; right: 20px; font-size: 20px; z-index: 1100;">
    <!-- ì•Œë¦¼(ì˜¤ë¥¸ìª½ì—ì„œ ìŠ¬ë¼ì´ë“œ) -->
    <i class="fa-solid fa-bell" onclick="toggleSidebar()" style="cursor:pointer;"></i>
    <!-- ë©”ë‰´(ì™¼ìª½ì—ì„œ ìŠ¬ë¼ì´ë“œ) -->
    <i class="fa-solid fa-bars" onclick="toggleMenuSidebar()" style="cursor:pointer;"></i>
  </div>
  {% endif %}

  <!-- ðŸ“‚ ë©”ë‰´ ì‚¬ì´ë“œë°” (ì™¼ìª½ ìŠ¬ë¼ì´ë“œ) -->
  {% include "pages/menu_sidebar.html" %}

  <!-- ðŸ”” ì•Œë¦¼ ì‚¬ì´ë“œë°” (ì˜¤ë¥¸ìª½ ìŠ¬ë¼ì´ë“œ) -->
  {% include "pages/alert_sidebar.html" %}

  <!-- Django messages -->
  {% if messages %}
    <div class="container mt-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  {% block content %}{% endblock %}
</div>

<!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

<!-- ì „ì—­: ì•Œë¦¼/ë©”ë‰´ ì‚¬ì´ë“œë°” í† ê¸€ & í‚¤ì›Œë“œ ë¡œì§ -->
<script>
  // ðŸ”” ì•Œë¦¼ ì‚¬ì´ë“œë°” í† ê¸€ (ì˜¤ë¥¸ìª½)
  window.toggleSidebar = function () {
    const el = document.getElementById('alertSidebar');
    if (!el) return;
    const isOpen = el.dataset.open === '1';
    el.style.right = isOpen ? '-400px' : '0';
    el.dataset.open = isOpen ? '0' : '1';
  };

  // ðŸ“‚ ë©”ë‰´ ì‚¬ì´ë“œë°” í† ê¸€ (ì™¼ìª½)
  window.toggleMenuSidebar = function () {
    const el = document.getElementById('menuSidebar');
    if (!el) return;
    const isOpen = el.dataset.open === '1';
    el.style.left = isOpen ? '-300px' : '0';
    el.dataset.open = isOpen ? '0' : '1';
  };

  // ì•Œë¦¼ ì‚¬ì´ë“œë°” ë‚´ í‚¤ì›Œë“œ ìž…ë ¥ í† ê¸€
  window.toggleKeywordInput = function () {
    const g = document.getElementById('keywordInputGroup');
    if (!g) return;
    g.style.display = (g.style.display === 'none' || !g.style.display) ? 'block' : 'none';
  };

  // ì•Œë¦¼ ì‚¬ì´ë“œë°” í‚¤ì›Œë“œ ì¶”ê°€(pill í˜•íƒœ)
  window.addKeyword = function () {
    const input = document.getElementById('keywordInput');
    const list = document.getElementById('keywordList');
    if (!input || !list) return;
    const text = (input.value || '').trim();
    if (!text) return;
    const pill = document.createElement('span');
    pill.className = 'badge rounded-pill text-bg-light me-1 mb-1';
    pill.textContent = text;
    const removeBtn = document.createElement('button');
    removeBtn.type = 'button';
    removeBtn.className = 'btn btn-sm btn-link text-danger ms-1 p-0';
    removeBtn.textContent = 'Ã—';
    removeBtn.onclick = () => pill.remove();
    pill.appendChild(removeBtn);
    list.appendChild(pill);
    input.value = '';
  };
</script>

{% block extra_scripts %}{% endblock %}
{% block script %}{% endblock %}
</body>
</html>